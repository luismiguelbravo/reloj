<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
  <title>Reloj</title>
  <link rel="icon" type="image/png" href="Image/favicon.png">
  <script src="angular.min.js"></script>
  <style>
      @font-face 
      {
        font-family: roboto;
        src: url('Font/Roboto/Roboto-Light.ttf') format('truetype');
      }
      .fuente_reloj
      {
        font-family: roboto;
        font-size: 72px;
      }
      .presente
      {
        background-color: #1A0B3B;
        color: #979E3D;
      }
      .pasado
      {
        background-color: #CCC;
      }
  </style>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>

<body>
  <!--script src="dias.js"></script-->
    <div ng-app="myApp">
      <div ng-controller='TimeCtrl'>
        <div class="fuente_reloj presente">{{ clock | date:'yyyy-MM-dd HH:mm:ss Z'}}</div>
          <table class="table table-striped table-hover">
            <tr>
              <th>
                ΔDIA(S)  
              </th>
              <th>
                ΔSEGUNDO(S)  
              </th>
              <th>
                DESCRIPCIÓN
              </th>
              <th>
                FECHA
              </th>
            </tr>
            <tr ng-repeat="fecha in fechas | orderBy:'dia':false">
              <td>
                {{ DiferenciaEnDias(fecha.dia) }}
              </td>
              <td>
                {{ DiferenciaEnSegundos(fecha.dia) }}
              </td>
              <td>
                {{fecha.descripcion}}
              </td>
              <td>
                {{fecha.dia  | date:'yyyy-MM-dd' }}
              </td>
            </tr>
          </table>
      </div>
    </div>
</div>

<script>
var module = angular.module('myApp', []);
module.controller('TimeCtrl', function($scope, $interval) {
  $scope.autor = "Luis Miguel Bravo";
  $scope.fecha_llegada_a_chile = new Date("10/19/2016");
  $scope.fecha_mudanza_nuevo_departamento = new Date("5/1/2017");
  $scope.fecha_maraton_de_programacion = new Date("11/26/2016");
  $scope.fecha_de_inicio_2brains = new Date("11/2/2016");
  $scope.fecha_de_navidad = new Date("12/24/2016");
  $scope.fecha_de_new_year = new Date("12/31/2016");

  $scope.fechas = [
  {
    descripcion : 'Llegada a Santiago de Chile',
    dia : new Date("10/19/2016")
  },
  {
    descripcion : 'Mudanza a nuevo departamento',
    dia : new Date("5/1/2017")
  },{
    descripcion : 'Maraton de programación',
    dia : new Date("11/26/2016")
  },{
    descripcion : 'Inicio 2BRAINS',
    dia : new Date("11/2/2016")
  },{
    descripcion : 'Navidad',
    dia : new Date("12/24/2016")
  },{
    descripcion : 'Año nuevo',
    dia : new Date("12/31/2016")
  }];

  var tick = function() {
    $scope.clock = Date.now();
  }
  tick();
  $interval(tick, 1000);


  $scope.HoyDia = function()
  {
    var today = new Date();
    var dd = today.getDate();
    var mm = today.getMonth()+1; //January is 0!
    var yyyy = today.getFullYear();
    if(dd<10) {
        dd='0'+dd
    } 
    if(mm<10) {
        mm='0'+mm
    } 
    return mm+'/'+dd+'/'+yyyy;
  }

  $scope.DiferenciaEnDias = function(midia){
    //alert($scope.HoyDia());
    //var _hoyDia = new Date($scope.HoyDia());
    var _hoyDia = new Date(Date.now());
    var timeDiff = midia.getTime() - _hoyDia.getTime();
    return Math.ceil(timeDiff / (1000 * 3600 * 24));
  };

  $scope.DiferenciaEnSegundos = function(midia)
  {
    //var _hoyDia = new Date($scope.HoyDia());
    var _hoyDia = new Date(Date.now());
    var dif = midia.getTime() - _hoyDia.getTime();
    var Seconds_from_T1_to_T2 = dif / 1000;
    return Seconds_from_T1_to_T2;
  };

  $scope.EsPasado = function(){
    var _hoyDia = new Date(Date.now());
    var dif = midia.getTime() - _hoyDia.getTime();
    if (dif < 0 )
    {
      return "pasado";
    }
    return "";
  };



});
</script>

</body>
</html>